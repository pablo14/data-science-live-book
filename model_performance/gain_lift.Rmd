Gain and Lift Analysis
====

### What is this about?

Both metrics are extremly useful when a predictive model (binary outcome) is built, and there is the need of measuring the quality of the score produced by it. More info about scoring here [link to scoring chapter]

```{r ,results="hide", echo=FALSE}
library(knitr)
opts_knit$set(base.dir = "model_performance")
```

```{r lib, results="hide"}
## Loading funModeling !
suppressMessages(library(funModeling))
data(heart_disease)
```

```{r}
fit_glm=glm(has_heart_disease ~ age + oldpeak, data=heart_disease, family = binomial)
heart_disease$score=predict(fit_glm, newdata=heart_disease, type='response')
gain_lift(data=heart_disease,str_score='score',str_target='has_heart_disease')
```

### How to interpret it?

First, each case is ordered according to the likelihood of being the less representative class, aka, score value.

Then `Gain` column accumlates the postive class, for each 10% of rows - `Population` column.

So for first row, it can be read as:

_"First 10 percent of population, ordered by score, colects 20.86% of total positive cases"_

For example, if we are sending emails based on this model, and we have budget to reach only **20%** of our users, how many responses we should expect to get?  Answer: **35.97%**

If we don't use a model, and we select randomly 20%, how many users do we have to reach? Well, 20%. That is the meaning of the dashed line, which starts in 0% and ends in 100%. Hopefuly with the predictive model we'll beat the randomness.


**Lift** column represents the ratio, between the `Gain` and the _gain by chance_. Taking as an example the Population=20%, the model is **1.8 times better** than randomness.

<br>

### Using the cut point

What value of the score reaches 30% of population? 
Answer: `0.56`

The cut point allows us to segment the data.



<br>

### Comparing models

In a good model, the gain will reach the 100% "at the begining" of the population, representing that it separates the classes.

When comparing models, a quick metric is to see if the gain at the begining of the population (10-30%) is higher.  

As a result, the model with a higher gain at the begining will have captured more information from data.
